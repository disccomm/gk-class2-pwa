<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>GK Quiz</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont;
    background: #f3f6f9;
  }

  header {
    background: #2563eb;
    color: #fff;
    padding: 14px;
    text-align: center;
    font-size: 18px;
    font-weight: 600;
  }

  .card {
    background: #fff;
    margin: 16px;
    padding: 16px;
    border-radius: 12px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  }

  .progress {
    height: 6px;
    background: #e5e7eb;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 12px;
  }

  .progress div {
    height: 100%;
    background: #2563eb;
    width: 0%;
  }

  img.question-image {
    max-width: 100%;
    border-radius: 10px;
    margin: 10px 0;
  }

  .option {
    border: 1px solid #d1d5db;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 10px;
    cursor: pointer;
    background: #fff;
  }

  .option.selected { background: #dbeafe; }
  .option.correct { background: #dcfce7; border-color: #16a34a; }
  .option.wrong { background: #fee2e2; border-color: #dc2626; }

  .row {
    display: flex;
    gap: 10px;
    margin-top: 12px;
  }

  button {
    flex: 1;
    padding: 12px;
    border-radius: 10px;
    border: none;
    font-size: 16px;
    cursor: pointer;
  }

  .btn-secondary { background: #e5e7eb; }
  .btn-primary { background: #2563eb; color: #fff; }

  .review-item {
    border-bottom: 1px solid #e5e7eb;
    padding: 10px 0;
  }
</style>
</head>

<body>

<header>GK Quiz</header>

<div id="app"></div>

<script>
/* ================= QUESTION BANK ================= */

const questions = [
  {
    text: "Which vegetable is shown?",
    image: "images/brinjal.jpg",
    options: ["Carrot", "Radish", "Turnip", "Brinjal"],
    correct: 3,
    pdfPage: 10
  },
  {
    text: "Which animal is shown?",
    image: "images/dog.jpg",
    options: ["Horse", "Dog", "Cat", "Cow"],
    correct: 1,
    pdfPage: 8
  },
  {
    text: "Which flower is the National Flower of India?",
    image: "images/lotus.jpg",
    options: ["Jasmine", "Lotus", "Rose", "Sunflower"],
    correct: 1,
    pdfPage: 12
  },
  {
    text: "Which planet do we live on?",
    options: ["Mars", "Venus", "Earth", "Jupiter"],
    correct: 2,
    pdfPage: 6
  },
  {
    text: "Which bird is the National Bird of India?",
    image: "images/peacock.jpg",
    options: ["Crow", "Peacock", "Parrot", "Sparrow"],
    correct: 1,
    pdfPage: 14
  }
];

/* ================= ENGINE ================= */

let index = 0;
let answers = Array(questions.length).fill(null);

const app = document.getElementById("app");

function renderQuestion() {
  const q = questions[index];
  const progress = ((index + 1) / questions.length) * 100;

  app.innerHTML = `
    <div class="card">
      <div class="progress"><div style="width:${progress}%"></div></div>
      <strong>Question ${index + 1} of ${questions.length}</strong>
      <p>${q.text}</p>
      ${q.image ? `<img src="${q.image}" class="question-image">` : ""}
      ${q.options.map((o, i) => `
        <div class="option ${answers[index] === i ? 'selected' : ''}"
             onclick="selectOption(${i})">${o}</div>
      `).join("")}

      <div class="row">
        <button class="btn-secondary" onclick="clearAnswer()">Clear</button>
        <button class="btn-secondary" onclick="skip()">Skip</button>
      </div>

      <div class="row">
        <button class="btn-secondary" onclick="prev()">Previous</button>
        <button class="btn-primary" onclick="next()">
          ${index === questions.length - 1 ? "Finish Quiz" : "Next"}
        </button>
      </div>
    </div>
  `;
}

function selectOption(i) {
  answers[index] = i;
  renderQuestion();
}

function clearAnswer() {
  answers[index] = null;
  renderQuestion();
}

function skip() {
  next();
}

function prev() {
  if (index > 0) index--;
  renderQuestion();
}

function next() {
  if (index < questions.length - 1) {
    index++;
    renderQuestion();
  } else {
    showReview();
  }
}

function showReview() {
  let score = 0;

  const review = questions.map((q, i) => {
    const correct = q.correct === answers[i];
    if (correct) score++;

    return `
      <div class="review-item">
        <strong>Q${i + 1}: ${q.text}</strong><br>
        Your answer: ${answers[i] !== null ? q.options[answers[i]] : "Skipped"}<br>
        Correct: ${q.options[q.correct]} (PDF page ${q.pdfPage})
      </div>
    `;
  }).join("");

  app.innerHTML = `
    <div class="card">
      <h2>Quiz Review</h2>
      ${review}
      <h3>Score: ${score} / ${questions.length}</h3>
      <button class="btn-primary" onclick="location.reload()">Restart</button>
    </div>
  `;
}

renderQuestion();
</script>

</body>
</html>