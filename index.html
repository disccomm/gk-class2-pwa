<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>GK Quiz – Batch 1</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f3f4f6}
header{background:#2563eb;color:#fff;padding:16px;text-align:center}
.container{max-width:800px;margin:auto;padding:16px}
.card{background:#fff;border-radius:12px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
button{padding:10px 14px;margin:6px;border:none;border-radius:8px;font-size:16px}
.primary{background:#2563eb;color:#fff}
.secondary{background:#9ca3af;color:#fff}
.option{border:1px solid #d1d5db;padding:10px;border-radius:8px;margin:8px 0}
.option.correct{background:#dcfce7;border-color:#22c55e}
.option.wrong{background:#fee2e2;border-color:#ef4444}
.progress{height:8px;background:#e5e7eb;border-radius:4px;margin:12px 0}
.bar{height:100%;width:0%;background:#2563eb;border-radius:4px}
img{max-width:100%;border-radius:8px;margin:8px 0}
</style>
<script src="questionBank.js"></script>
</head>
<body>

<header>
  <h1>GK Quiz – Batch 1</h1>
  <p>Working test build</p>
</header>

<div class="container">
  <div class="card" id="setup">
    <label>Select number of questions:</label><br/>
    <select id="count"></select><br/><br/>
    <button class="primary" onclick="startQuiz()">Start Quiz</button>
  </div>

  <div class="card" id="quiz" style="display:none">
    <div class="progress"><div id="bar" class="bar"></div></div>
    <h2 id="qtext"></h2>
    <img id="qimg" style="display:none"/>
    <div id="options"></div>
    <button class="secondary" onclick="clearAnswer()">Clear</button>
    <button class="secondary" onclick="skip()">Skip</button>
    <button class="primary" onclick="next()">Next</button>
  </div>

  <div class="card" id="review" style="display:none"></div>
</div>

<script>
const select = document.getElementById("count");
for(let i=10;i<=200;i+=10){
  const o=document.createElement("option");
  o.value=i;o.text=i;
  select.appendChild(o);
}

function shuffle(arr){
  return [...arr].sort(()=>Math.random()-0.5);
}

let quiz=[],current=0,answers={};

function startQuiz(){
  quiz = shuffle(QUESTION_BANK).slice(0, Math.min(select.value, QUESTION_BANK.length));
  document.getElementById("setup").style.display="none";
  document.getElementById("quiz").style.display="block";
  render();
}

function render(){
  const q=quiz[current];
  document.getElementById("qtext").innerText = `Q${current+1} of ${quiz.length}. ${q.question}`;
  document.getElementById("bar").style.width=((current+1)/quiz.length*100)+"%";
  const img=document.getElementById("qimg");
  if(q.imageUrl){img.src=q.imageUrl;img.style.display="block";}
  else img.style.display="none";

  const opts=document.getElementById("options");
  opts.innerHTML="";
  shuffle(q.options).forEach(o=>{
    const d=document.createElement("div");
    d.className="option";
    d.innerText=o;
    if(answers[current]){
      if(o===q.answer) d.classList.add("correct");
      else if(o===answers[current]) d.classList.add("wrong");
    }
    d.onclick=()=>{
      if(answers[current])return;
      answers[current]=o;
      render();
    };
    opts.appendChild(d);
  });
}

function clearAnswer(){ delete answers[current]; render(); }
function skip(){ if(current<quiz.length-1){current++;render();} }
function next(){
  if(current<quiz.length-1){current++;render();}
  else showReview();
}

function showReview(){
  document.getElementById("quiz").style.display="none";
  const r=document.getElementById("review");
  r.style.display="block";
  let html="<h2>Review</h2>";
  quiz.forEach((q,i)=>{
    html+=`<p><b>${q.question}</b><br/>
    Your answer: ${answers[i]||"Not Answered"}<br/>
    Correct answer: <b>${q.answer}</b><br/>
    Refer PDF page ${q.page}</p><hr/>`;
  });
  r.innerHTML=html;
}
</script>
</body>
</html>
